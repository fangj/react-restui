"use strict";

var qiniu = require("qiniu");

function qntoken(app, ACCESS_KEY, SECRET_KEY, bucket) {

	//需要填写你的 Access Key 和 Secret Key
	qiniu.conf.ACCESS_KEY = ACCESS_KEY;
	qiniu.conf.SECRET_KEY = SECRET_KEY;

	var putPolicy = new qiniu.rs.PutPolicy(bucket);

	app.get('/qntoken', function (req, res) {
		var uptoken = putPolicy.token();
		res.json({ uptoken: uptoken });
	});
}

module.exports = qntoken;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvcW50b2tlbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksUUFBUSxRQUFRLE9BQVIsQ0FBWjs7QUFLQSxTQUFTLE9BQVQsQ0FBaUIsR0FBakIsRUFBcUIsVUFBckIsRUFBZ0MsVUFBaEMsRUFBMkMsTUFBM0MsRUFBa0Q7O0FBRWpEO0FBQ0EsT0FBTSxJQUFOLENBQVcsVUFBWCxHQUF3QixVQUF4QjtBQUNBLE9BQU0sSUFBTixDQUFXLFVBQVgsR0FBd0IsVUFBeEI7O0FBRUEsS0FBSSxZQUFZLElBQUksTUFBTSxFQUFOLENBQVMsU0FBYixDQUF1QixNQUF2QixDQUFoQjs7QUFFQSxLQUFJLEdBQUosQ0FBUSxVQUFSLEVBQW1CLFVBQVMsR0FBVCxFQUFhLEdBQWIsRUFBaUI7QUFDbkMsTUFBSSxVQUFRLFVBQVUsS0FBVixFQUFaO0FBQ0EsTUFBSSxJQUFKLENBQVMsRUFBQyxTQUFRLE9BQVQsRUFBVDtBQUNBLEVBSEQ7QUFJQTs7QUFFRCxPQUFPLE9BQVAsR0FBZSxPQUFmIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHFpbml1ID0gcmVxdWlyZShcInFpbml1XCIpO1xyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gcW50b2tlbihhcHAsQUNDRVNTX0tFWSxTRUNSRVRfS0VZLGJ1Y2tldCl7XHJcblxyXG5cdC8v6ZyA6KaB5aGr5YaZ5L2g55qEIEFjY2VzcyBLZXkg5ZKMIFNlY3JldCBLZXlcclxuXHRxaW5pdS5jb25mLkFDQ0VTU19LRVkgPSBBQ0NFU1NfS0VZO1xyXG5cdHFpbml1LmNvbmYuU0VDUkVUX0tFWSA9IFNFQ1JFVF9LRVk7XHJcblxyXG5cdHZhciBwdXRQb2xpY3kgPSBuZXcgcWluaXUucnMuUHV0UG9saWN5KGJ1Y2tldCk7XHJcblx0XHJcblx0YXBwLmdldCgnL3FudG9rZW4nLGZ1bmN0aW9uKHJlcSxyZXMpe1xyXG5cdFx0dmFyIHVwdG9rZW49cHV0UG9saWN5LnRva2VuKCk7XHJcblx0XHRyZXMuanNvbih7dXB0b2tlbjp1cHRva2VufSk7XHJcblx0fSlcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHM9cW50b2tlbjtcclxuIl19